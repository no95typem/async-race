(()=>{"use strict";var e={3916:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});const r={garage:"_21SC4SGf5mTamWfNdNRR",garage__bg:"_2VnbeeG4HKnZfSWUedizHh","garage__track-container":"_1rsPT6UvHnbHI-FUFvPaSe","garage-bg":"-BA3r_cxZwAYkgGQVVZeo","garage-bg__video":"_3byu86MCf3s6B7JQuetNAw","garage-bg__car-ctl-btn":"_3upDU-ngLjybmFg4wiVvfl","garage-bg__car-ctl-block-number":"_3dT19pzigDW1UKuPVLEguq","garage-bg__car-ctl-block":"_2e0Ox8Joh0jw60ztR_rVt5","garage-bg__cars-ctls-block":"wMVLCRcoluFnZleBHWXlm","garage-bg__self-ctls-block":"_2VQVmkB2amN4PG9XCyFye9","garage-bg__pager":"_2avafWgl8XDS2KLJswKq0H","synthwave-background":"_2pUKJme_w_0KTS_JoVNV5b","move-grid":"_1MqERRNbzZtvdd9iE43L04","synthwave-background_race-mode":"n1z9UH35nfilmkK2lmQvV",race:"_375ItX4gjZY-ZT7KrEfBgG"}},6010:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});const r={"car-div":"_3pRKwGaRv59JcJqlApAnkk","car-div__canvas":"rH6_OMXna8-zeemMHF11D","car-div__wheel":"_3WNDl-LGGtViqzAfLLX4CB","car-div__wheel_forward":"_3Rdh32fs7fi-95LcabV_Ed","car-div__wheel_backward":"_3xptMXOOFn6YcMVYMigRMa","car-div__explosion":"_3w8-mlW0m2zLABohqiDQ3e","car-div_rollForward":"_3xWmq3Q2UpNiq2nICrGAIN","car-div-anim":"_381V-1xCMVwSdGT0FxnQiO","tire-anim":"_2Qs9DAZPIqZivw_0ON2Vot"}},2022:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});const r={root:"_2uo9WXSTJyDD3jBlT_quev","text-input":"_2YNdYEaErpy02Ske_bZONx","color-input":"_3Ye7rbfoBnq4HZn4H-yDB8"}},7715:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});const r={"main-controls":"_2b_svto1O0DGSO3_579_Xj","btn-block":"_262VSHreYXfZUHLGeCJEvZ"}},2096:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});const r={track:"_2hDrLwwwZMiv2NrI-XZZqJ","track__controls-block":"_3pqcODoHFqX9rxmLKBnhD4"}},3544:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});const r={header:"_3TTTWNe5aoHesw4iV0YUGU",header__logo:"_2idUQTZia_1M_0xkhMkXf8","header-nav":"_7vejZGT8OzUejTiWyGs1P","header-nav__item":"_1NYwlHRXmh2YGu63soBsjx","header-nav__anchor":"_2n39qEg5Iz5Tym2Z0Jrjz9","header-nav__anchor_active":"_2bRvd3RlExbbSpyXLuxSdS","header-nav__svg":"_2FCXcgNK7Jgl9f3ZK-O56I","header-nav__span":"_1NVrpdaSQLvqho4VNqQqit","header-nav__list":"_1vy8OijKt-Cy7SGXyM4ek9","header-nav__list_disabled":"_25SilQm6mkAlbl-WpajKBY"}},9052:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});const r={winners:"HVDfoBgyIQ4teF5EKFzcD",table:"_3mJKnd573Tt4WspNl7gf1J","table__can-be-sorted":"_3Xa74hpyx3g6XUuZ9fB9Cm","table__sorted-elem":"rfPuVNCW0Sd4nzQGO8-R8","table__sorted-elem_asc":"N6296gY2c5AFEX4KjE4I4","table__sorted-elem_desc":"_37bMOUs2OF28ZqMubJCPnM",pager:"_2q-noyJbwIpKOMhl7AWlq5","pager-span":"_1O8erRuDz9RWa3C9tqnUm-","pager-btn":"_3OktYstRgXgDE6zlpOM6LA"}},6725:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});const r={app:"_2ljk-3_Qk7EjDct5a15qZP","main-component":"_394erWdWCWrQmkYlaBZ1L5",btn:"_3cliA46UjEIGfEKGRnJzCZ","btn-6":"_35BryCkuNmCUsRxmBw_Y1","btn-15":"TNTO3dtfSfS40M6g8U274"}},6752:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const a=s(1209),n=s(5207),o=s(7172),i=s(7950),c=s(4690),l=s(2994),d=s(4977),h=r(s(6725)),u=s(8785),_=s(7656),E=s(5856),g=s(3287);t.App=class{constructor(e){this.rootElement=e,this.hubName=E.DBUS_HUB_NAMES.APP,this.loadedMainComponents={},this.defaultRouterAgent=new a.SimpleRouterAgent("hash","",(()=>this.loadMainComponent("default"))),this.router=new n.SimpleRouter({mode:"#",defaultRoot:"",defaultAgent:this.defaultRouterAgent}),this.mainlineDBus=new o.DBus,this.watchRouterMsgs=async e=>{const{msg:t}=e;return t instanceof i.DBusMsgRouteIsChangedMsg&&this.loadMainComponent(t.newRoute),l.DBUS_COMMON_RESPONSES.VOID},this.rootElement.classList.add(h.default.app);const t=new d.HeaderComponent(E.DBUS_HUB_NAMES.HEADER);this.rootElement.append(t.rootElement),this.mainlineDBus.attachHub(t),this.mainlineDBus.attachHub(this),this.mainlineDBus.attachHub(this.router),this.router.activateWantedAgents()}connect(e){const t=e.getNewRX(this.watchRouterMsgs);e.plugRX(c.DBusTopics.ROUTING,t)}loadMainComponent(e){if(!(e in this.loadedMainComponents))switch(e){case"#garage":this.loadedMainComponents[`${e}`]=new u.GarageComp;break;case"#winners":this.loadedMainComponents[`${e}`]=new g.WinnersComp;break;default:window.location.hash="#garage"}const t=this.loadedMainComponents[`${e}`];t&&(this.currMainComponent&&this.currMainComponent.rootElement.remove(),this.currMainComponent=t,t.rootElement.classList.add(h.default["main-component"]),this.rootElement.append(t.rootElement),_.isDBusHub(this.currMainComponent)&&this.mainlineDBus.attachHub(this.currMainComponent))}}},1069:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.CarActions=void 0,(s=t.CarActions||(t.CarActions={}))[s.CREATED=0]="CREATED",s[s.SELECTED=1]="SELECTED",s[s.REMOVED=2]="REMOVED",s[s.UPDATED=3]="UPDATED"},2223:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsgCarActionMsg=void 0;const r=s(4690),a=s(7469);class n extends a.DBusMsg{constructor(e,t,s){super(r.DBusTopics.CAR_ACTION,t,s),this.action=e,this.rxIds=t,this.prefResponseRxIds=s}}t.DBusMsgCarActionMsg=n},9237:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsgCarActionCreatedMsg=void 0;const r=s(1069),a=s(2223);class n extends a.DBusMsgCarActionMsg{constructor(e,t,s){super(r.CarActions.CREATED,t,s),this.car=e,this.rxIds=t,this.prefResponseRxIds=s}}t.DBusMsgCarActionCreatedMsg=n},8577:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsgCarActionRemovedMsg=void 0;const r=s(1069),a=s(2223);class n extends a.DBusMsgCarActionMsg{constructor(e,t,s,a){super(r.CarActions.REMOVED,s,a),this.car=e,this.nullifiedContract=t,this.rxIds=s,this.prefResponseRxIds=a}}t.DBusMsgCarActionRemovedMsg=n},6911:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsgCarActionSelectedMsg=void 0;const r=s(1069),a=s(2223);class n extends a.DBusMsgCarActionMsg{constructor(e,t,s,a){super(r.CarActions.SELECTED,s,a),this.car=e,this.notifyChanges=t,this.rxIds=s,this.prefResponseRxIds=a}}t.DBusMsgCarActionSelectedMsg=n},9565:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsgGarageRaceMsg=void 0;const r=s(4690),a=s(7469);class n extends a.DBusMsg{constructor(e,t){super(r.DBusTopics.GARAGE,e,t),this.rxIds=e,this.prefResponseRxIds=t}}t.DBusMsgGarageRaceMsg=n},9362:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsgRaceRequestMsg=void 0;const r=s(9565);class a extends r.DBusMsgGarageRaceMsg{constructor(e,t){super(e,t),this.rxIds=e,this.prefResponseRxIds=t}}t.DBusMsgRaceRequestMsg=a},7977:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsgGarageResetMsg=void 0;const r=s(4690),a=s(7469);class n extends a.DBusMsg{constructor(e,t){super(r.DBusTopics.GARAGE,e,t),this.rxIds=e,this.prefResponseRxIds=t}}t.DBusMsgGarageResetMsg=n},3102:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsgGarageResetReqMsg=void 0;const r=s(7977);class a extends r.DBusMsgGarageResetMsg{constructor(e,t){super(e,t),this.rxIds=e,this.prefResponseRxIds=t}}t.DBusMsgGarageResetReqMsg=a},4768:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GarageComponentControllerAkaDirector=void 0;const a=s(2994),n=s(5856),o=s(4690),i=s(379),c=s(8577),l=s(8856),d=s(8990),h=s(1598),u=s(9237),_=s(9362),E=s(3102),g=r(s(3916)),m=r(s(6725));t.GarageComponentControllerAkaDirector=class{constructor(e,t,s,r,o){this.tracksContainer=e,this.tracksNumberSelect=t,this.btnPrevPage=s,this.btnNextPage=r,this.carCtlsBlock=o,this.hubName=n.DBUS_HUB_NAMES.GARAGE_CONTROLLER,this.txs=new Set,this.pageCarsLimitDefault=10,this.firstPageNumber=1,this.currPageNumber=this.firstPageNumber,this.lastPageNumber=0,this.racingRXFunc=async e=>e.msg instanceof _.DBusMsgRaceRequestMsg?this.performRace():e.msg instanceof E.DBusMsgGarageResetReqMsg?this.resetState():a.DBUS_COMMON_RESPONSES.VOID,this.carActionsRXFunc=async e=>((e.msg instanceof c.DBusMsgCarActionRemovedMsg||e.msg instanceof u.DBusMsgCarActionCreatedMsg)&&(this.readPageNumbers(),this.refillContainer()),a.DBUS_COMMON_RESPONSES.VOID),this.createCarCtlBlock=(e,t)=>{const s=[e.btnSelect,e.btnIgnite,e.btnStart,e.btnRm];s.forEach((e=>{e.classList.add(m.default.btn,g.default["garage-bg__car-ctl-btn"])}));const r=document.createElement("span");r.classList.add(g.default["garage-bg__car-ctl-block-number"]),r.textContent=t.toString();const a=document.createElement("div");return a.classList.add(g.default["garage-bg__car-ctl-block"]),a.append(r,...s),a},this.garageManagersTeam=new l.GarageManagersTeam(e,o),this.pageCarsLimit=this.pageCarsLimitDefault}startWorking(){this.readPageNumbers(),this.refillContainer(),this.setupBtns()}async connect(e){this.txs.add(e.getNewTX("send requests to REST Garage client")),this.garageManagersTeam.autoConnect(e);const t=e.getNewRX(this.carActionsRXFunc,"monitor cars removes");e.plugRX(o.DBusTopics.CAR_ACTION,t);const s=e.getNewRX(this.racingRXFunc,"handle race requsets");e.plugRX(o.DBusTopics.GARAGE,s)}readPageNumbers(){i.REST_CLIENT_GARAGE.getCars().then((e=>{this.lastPageNumber=Number.parseInt(e.limit,10)/this.pageCarsLimit,this.toggleBtnsDisable()}))}async resetState(){return await this.garageManagersTeam.resetState()}async performRace(){this.btnNextPage.disabled=!0,this.btnPrevPage.disabled=!0,await this.garageManagersTeam.performRace()}setupBtns(){this.toggleBtnsDisable(),this.btnNextPage.addEventListener("click",(()=>{this.currPageNumber++,this.toggleBtnsDisable(),this.refillContainer()})),this.btnPrevPage.addEventListener("click",(()=>{this.currPageNumber--,this.toggleBtnsDisable(),this.refillContainer()}))}toggleBtnsDisable(){this.currPageNumber>this.firstPageNumber?this.btnPrevPage.disabled=!1:this.btnPrevPage.disabled=!0,this.currPageNumber<this.lastPageNumber?this.btnNextPage.disabled=!1:this.btnNextPage.disabled=!0}refillContainer(){for(;this.tracksContainer.firstChild;)this.tracksContainer.firstChild.remove();for(;this.carCtlsBlock.firstChild;)this.carCtlsBlock.firstChild.remove();i.REST_CLIENT_GARAGE.getCars(this.currPageNumber,this.pageCarsLimit).then((async e=>{const{limit:t,cars:s}=e;if(0===s.length&&this.currPageNumber>this.firstPageNumber)return this.currPageNumber--,this.toggleBtnsDisable(),void this.refillContainer();await this.garageManagersTeam.nullifyContracts();const r=[],a=window.getComputedStyle(this.tracksContainer),n=Number.parseFloat(a.height)-Number.parseFloat(a.paddingBottom)-Number.parseFloat(a.paddingTop),o=3.78,i=.2*window.innerWidth/o,c=[];let l=0;s.forEach(((e,t)=>{const s=i*.95**t;l+=s,c.push(s)}));const u=l-n,_=c.sort(((e,t)=>e-t)),E=u/s.length-2;let g=E;const m=_[0]*o,R=20*window.innerWidth/1920;s.forEach(((e,t)=>{const a=new h.TrackComp;a.rootElement.style.setProperty("height",`${_[t]}px`),0!==t&&(a.rootElement.style.setProperty("top",-g+"px"),g+=E),a.rootElement.style.setProperty("z-index",`${t+1}`),a.rootElement.style.setProperty("padding",`0px ${_[_.length-1-t]*o-m+R*(s.length-1-t)}px`);const n=new d.CarComp(e);a.placeCar(n),r.push({track:a,car:n})})),this.tracksContainer.append(...r.map((e=>e.track.rootElement))),this.carCtlsBlock.append(...r.map(((e,t)=>this.createCarCtlBlock(e.car,t+1)))),this.garageManagersTeam.addContracts(...r)})).catch((()=>{}))}}},1294:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GarageDriver=t.GarageDriverCommands=void 0;const r=s(9461);var a;(a=t.GarageDriverCommands||(t.GarageDriverCommands={}))[a.START_DRIVING=0]="START_DRIVING",a[a.STOP_DRIVING=1]="STOP_DRIVING";class n{isFree(){return!this.contract}putBehindTheWheel(e){if(this.contract)throw new Error("ALREADY IN CAR");this.contract=e}async getOutOfTheCar(){this.contract=void 0}async performDrivingProtocol(e){this.currActionPromise&&await this.currActionPromise;const t=new Promise(((s,r)=>{this.TurnOnTheIgnition().then((s=>this.drive(s,t,e))).then((e=>s(e))).catch((e=>r(e)))})).finally((()=>{this.currActionPromise===t&&(this.currActionPromise=void 0)}));return this.currActionPromise=t,t}async TurnOnTheIgnition(){if(!this.contract)throw new Error("NOT_BEHIND_THE_WHEEL");const e=await r.REST_CLIENT_ENGINE.toggleEngine(this.contract.car.currCar.id,"started");return console.log("START ENGINE"),e}async returnToStart(){const e=new Promise(((e,t)=>{if(this.contract){const t=1;this.contract.car.rollBack(t).then((()=>e(!0)))}})).finally((()=>{this.currActionPromise===e&&(this.currActionPromise=void 0)}));return this.currActionPromise=e,e}async drive(e,t,s){return new Promise(((a,o)=>{if(this.contract){const{contract:i}=this,c=n.calculateDriveTime(e),l=i.track.getTrackLength();r.REST_CLIENT_ENGINE.enterDriveMode(i.car.currCar.id).then((()=>{i===this.contract&&t===this.currActionPromise?(i.car.stop(),a(c)):a(!1)})).catch((()=>{console.log("broken"),i===this.contract&&t===this.currActionPromise&&(console.log("stop car"),i.car.stop(!0,s),o(new Error("BROKEN")))})).finally((()=>{i===this.contract&&t===this.currActionPromise&&r.REST_CLIENT_ENGINE.toggleEngine(i.car.currCar.id,"stopped")})),i.car.rollForward(c,l)}}))}static calculateDriveTime(e){return e.distance/1e3/e.velocity}}t.GarageDriver=n},8856:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GarageManagersTeam=void 0;const a=s(745),n=s(6911),o=s(379),i=s(8577),c=s(1294),l=s(4590),d=r(s(3916)),h=s(928),u=s(3231);t.GarageManagersTeam=class{constructor(e,t){this.tracksContainer=e,this.carCtlsBlock=t,this.txs=new Set,this.contracts=new Set,this.freeDrivers=new Set,this.busyDrivers=new Map,this.carCtlsClickListener=e=>{e.target instanceof HTMLButtonElement&&this.contracts.forEach((t=>{e.target===t.car.btnSelect&&this.handleSelection(t),e.target===t.car.btnRm&&this.handleRemoving(t),e.target===t.car.btnIgnite&&this.handleDriving(t),e.target===t.car.btnStart&&this.handleRestoreState(t)}))},this.handleWinner=(e,t)=>{const s=e.car.currCar;h.REST_CLIENT_WINNERS.getWinner(s.id).then((e=>{const s={id:e.id,wins:e.wins+1,time:t<e.time?Number.parseFloat(t.toFixed(2)):e.time};h.REST_CLIENT_WINNERS.updateWinner(s)})).catch((e=>{if(e.message===u.REST_CLIENT_ERROR.NOT_FOUND){const e={id:s.id,wins:1,time:Number.parseFloat(t.toFixed(2))};h.REST_CLIENT_WINNERS.createWinner(e)}}))},this.carCtlsBlock.addEventListener("click",this.carCtlsClickListener)}autoConnect(e){const t=e.getNewTX("garage serviceman");this.txs.add(t)}async nullifyContracts(e){e?(this.tryFreeDrivers(...e),e.forEach((e=>{this.contracts.delete(e)}))):(this.tryFreeDrivers(...this.contracts),this.contracts.clear())}addContracts(...e){e.forEach((e=>this.contracts.add(e)))}async resetState(){this.currRaceId=void 0,await this.rollbackCars(),console.log(this.currRaceId),this.currRaceId||this.setAllBtnsDisabled(!1)}async handleRestoreState(e){const t=this.busyDrivers.get(e);t&&await t.returnToStart()}async handleDriving(e,t){let s=this.busyDrivers.get(e);return s||(s=[...this.freeDrivers].find((e=>e.isFree())),s?this.freeDrivers.delete(s):s=new c.GarageDriver,this.busyDrivers.set(e,s),s.putBehindTheWheel(e)),await s.performDrivingProtocol(t).catch((e=>e))}handleRemoving(e){o.REST_CLIENT_GARAGE.deleteCar(e.car.currCar.id).then((async()=>{await h.REST_CLIENT_WINNERS.deleteWinner(e.car.currCar.id).catch((()=>{})),this.tryFreeDrivers(e),this.contracts.delete(e);const t=new i.DBusMsgCarActionRemovedMsg(e.car.currCar,e);this.txs.forEach((e=>{e.transmit({msg:t,prepMode:a.DBusTXPrepModes.freeze,waitMode:a.DBusTXWaitModes.nowait})}))}))}handleSelection(e){const t=new n.DBusMsgCarActionSelectedMsg(e.car.currCar,this.genSelectCallback(e));this.txs.forEach((e=>{e.transmit({msg:t,prepMode:a.DBusTXPrepModes.freeze,waitMode:a.DBusTXWaitModes.nowait})}))}setAllBtnsDisabled(e){this.contracts.forEach((t=>{t.car.btnIgnite.disabled=e,t.car.btnRm.disabled=e,t.car.btnSelect.disabled=e,t.car.btnStart.disabled=e}))}async rollbackCars(){this.tracksContainer.style.setProperty("--translate-x","0px");const e=[];this.busyDrivers.forEach((t=>{e.push(t.returnToStart())})),await Promise.all(e)}async performRace(){const e=l.genUniqId();if(this.currRaceId=e,this.setAllBtnsDisabled(!0),await this.rollbackCars(),e!==this.currRaceId)return;const t=[],s=[],r={isFinishVisible:!1};await new Promise((a=>{this.tracksContainer.classList.add(d.default["synthwave-background_race-mode"]);const n=this.contracts.size;this.contracts.forEach((o=>{this.handleDriving(o,r).then((i=>{e===this.currRaceId&&(!1===i||i instanceof Error?s.push(o):(0===t.length&&(r.isFinishVisible=!0,this.tracksContainer.classList.remove(d.default["synthwave-background_race-mode"]),this.handleWinner(o,i)),t.push(o)),t.length+s.length===n&&a(!0))}))}))})),this.tracksContainer.classList.remove(d.default["synthwave-background_race-mode"]),e===this.currRaceId&&(this.setAllBtnsDisabled(!1),console.log(t,s))}tryFreeDrivers(...e){e.forEach((e=>{const t=this.busyDrivers.get(e);t&&t.getOutOfTheCar().then((()=>{this.busyDrivers.delete(e),this.freeDrivers.add(t)}))}))}genSelectCallback(e){return t=>{this.contracts.has(e)&&e.car.updateData(t)}}}},8785:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GarageComp=void 0;const a=s(1168),n=s(5856),o=s(4768),i=s(44),c=r(s(3916)),l=r(s(6725));class d extends a.BaseComp{constructor(){super("section"),this.hubName=n.DBUS_HUB_NAMES.GARAGE,this.mainControlsComp=new i.MainControlsComp,this.carsCtlsBlock=document.createElement("div"),this._rootElement.classList.add(c.default.garage);const e=document.createElement("button");e.textContent="Next page",e.classList.add(l.default.btn,l.default["btn-6"]);const t=document.createElement("button");t.textContent="Prev page",t.classList.add(l.default.btn,l.default["btn-6"]);const s=document.createElement("div");s.classList.add(c.default["garage-bg__pager"]);const r=document.createElement("select"),a=document.createElement("div");a.classList.add(c.default["garage__track-container"],c.default["synthwave-background"]),s.append(r,t,e);const d=document.createElement("div");d.classList.add(c.default["garage-bg__self-ctls-block"]),d.append(this.mainControlsComp.rootElement,s);const h=document.createElement("div");h.classList.add(c.default.garage__bg,c.default["garage-bg"]);const u=document.createElement("video");u.classList.add(c.default["garage-bg__video"]),u.controls=!1,u.loop=!0,u.defaultMuted=!0,u.muted=!0,u.autoplay=!0,u.src="./assets/videos/bg/cyberpunk2077-garage.mp4",this.controller=new o.GarageComponentControllerAkaDirector(a,r,t,e,this.carsCtlsBlock),u.onloadeddata=()=>{console.log("loaded"),this.controller.startWorking()},this.carsCtlsBlock.classList.add(c.default["garage-bg__cars-ctls-block"]),h.append(u,this.carsCtlsBlock,d),this._rootElement.append(h,a)}connect(e){e.attachSubHub(this.controller),e.attachSubHub(this.mainControlsComp)}}t.GarageComp=d},8990:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CarComp=void 0;const a=s(1168),n=s(3662),o=s(5094),i=r(s(6010));class c extends a.BaseComp{constructor(e){super("div"),this._currCar=e,this.canvas=document.createElement("canvas"),this.tireBack=document.createElement("img"),this._btnSelect=document.createElement("button"),this._btnRm=document.createElement("button"),this._spanCarName=document.createElement("span"),this._btnIgnite=document.createElement("button"),this._btnStart=document.createElement("button"),this.hexToRgb=e=>{let t;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return t=e.split(""),4===t.length&&(t=[t[1],t[1],t[2],t[2],t[3],t[3]]),{r:Number.parseInt(e.slice(1,3),16),g:Number.parseInt(e.slice(3,5),16),b:Number.parseInt(e.slice(5,7),16)};throw new Error("Bad Hex")},this._rootElement.classList.add(i.default["car-div"]),this.canvas.classList.add(i.default["car-div__canvas"]),this._rootElement.append(this.canvas),this._btnSelect.textContent="select",this._btnRm.textContent="remove",this._btnIgnite.textContent="start!",this._btnStart.textContent="reset",this.updateData(this.currCar),this.redrawCar(),this.drawWheels()}drawWheels(){const e=new Image;e.src=c.CAR_WHEEL_IMG_SRC,e.onload=()=>{e.classList.add(i.default["car-div__wheel"]);const t=o.OBJ_PROCESSOR.deepClone(e);e.classList.add(i.default["car-div__wheel_forward"]),t.classList.add(i.default["car-div__wheel_backward"]),this._rootElement.append(e),this._rootElement.append(t)}}updateData(e){this._currCar=e,this.redrawCar()}async rollBack(e){this._rootElement.style.setProperty("transition",`all ${e}s ${c.TIMING_FUNCTION}`);const t=await n.transitionPromise({elem:this._rootElement,prop:"transform",val:"translateX(0px)",valToWait:"matrix(1, 0, 0, 1, 0, 0)"});return console.log(t),this._rootElement.classList.remove(i.default["car-div_rollForward"]),t}async rollForward(e,t){const s=window.getComputedStyle(this.rootElement),r=Number.parseFloat(s.width),a=t-r;console.log(r),this._rootElement.classList.add(i.default["car-div_rollForward"]),this._rootElement.style.setProperty("transition",`all ${e}s ${c.TIMING_FUNCTION}`);const o=await n.transitionPromise({elem:this._rootElement,prop:"transform",val:`translateX(${a}px)`,valToWait:`matrix(1, 0, 0, 1, ${a}, 0)`});return this._rootElement.classList.remove(i.default["car-div_rollForward"]),o}stop(e,t){const s=window.getComputedStyle(this._rootElement).getPropertyValue("transform");if(this.rootElement.style.setProperty("transform",s),this.rootElement.style.setProperty("transition",""),this._rootElement.classList.remove(i.default["car-div_rollForward"]),e){console.log(t),t?.isFinishVisible||(this._rootElement.style.setProperty("transition",`all 2s ${c.TIMING_FUNCTION}`),n.transitionPromise({elem:this._rootElement,prop:"transform",val:"translateX(-500px)",valToWait:"matrix(1, 0, 0, 1, 0, 0)"}));const e=new Image;let s=0;e.classList.add(i.default["car-div__explosion"]),e.src=`${c.CAR_EXPLOSION_IMG_DATA.BASE_URL}${s}${c.CAR_EXPLOSION_IMG_DATA.EXTENSION}`,e.onload=async()=>{this._rootElement.append(e),await new Promise((e=>setTimeout(e,c.CAR_EXPLOSION_IMG_DATA.FRAME_TIME_MS))),s++,s<c.CAR_EXPLOSION_IMG_DATA.FRAMES_COUNT?e.src=`${c.CAR_EXPLOSION_IMG_DATA.BASE_URL}${s}${c.CAR_EXPLOSION_IMG_DATA.EXTENSION}`:e.remove()}}}get currCar(){return this._currCar}get btnSelect(){return this._btnSelect}get btnRm(){return this._btnRm}get btnIgnite(){return this._btnIgnite}get btnStart(){return this._btnStart}get spanCarName(){return this._spanCarName}redrawCar(){const e=new Image;e.src=c.CAR_BODY_IMG_SRC,e.onload=()=>{window.getComputedStyle(this._rootElement),window.getComputedStyle(this.canvas),this.canvas.height=e.height,this.canvas.width=e.width;const t=this.canvas.getContext("2d");t&&(t.shadowColor=this._currCar.color,t.shadowBlur=80,t.drawImage(e,0,0,this.canvas.width,this.canvas.height)),this.repaint()}}repaint(){const e=this.canvas.getContext("2d")?.getImageData(0,0,this.canvas.width,this.canvas.height);if(e){const t=this.hexToRgb(this._currCar.color);for(let s=0;s<e.width;s++)for(let r=0;r<e.height;r++){const a=4*r*e.width+4*s,n=e.data[a],o=e.data[a+1],i=e.data[a+2],c=2*i-n-o,l=10,d=70;n>d&&o>d&&i>d&&c<l&&(e.data[a]=n/255*t.r,e.data[a+1]=o/255*t.g,e.data[a+2]=i/255*t.b)}this.canvas.getContext("2d")?.putImageData(e,0,0,0,0,this.canvas.width,this.canvas.height)}}}t.CarComp=c,c.TIMING_FUNCTION="cubic-bezier(.72,.2,.54,.77)",c.CAR_BODY_IMG_SRC="./assets/imgs/cars/body.gif",c.CAR_WHEEL_IMG_SRC="./assets/imgs/cars/tire back.gif",c.CAR_EXPLOSION_IMG_DATA={BASE_URL:"./assets/imgs/cars/explosion/",EXTENSION:".png",FRAMES_COUNT:9,FRAME_TIME_MS:200}},4312:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateCompController=void 0;const r=s(745),a=s(379),n=s(9237),o=s(8982);class i extends o.CreateUpdateCompControllerProto{constructor(e){super(e.inputText,e.inputColor,e.btn),this.txs=new Set,this.setupBtnCreate()}setupBtnCreate(){this.btn.addEventListener("click",(()=>{this.btn.disabled=!0;const e={name:this.inputText.value,color:this.inputColor.value};a.REST_CLIENT_GARAGE.createCar(e).then((e=>{const t=new n.DBusMsgCarActionCreatedMsg(e);this.txs.forEach((e=>{e.transmit({msg:t,prepMode:r.DBusTXPrepModes.clone,waitMode:r.DBusTXWaitModes.nowait})}))})).finally((()=>{this.btn.disabled=!1}))}))}autoConnect(e){const t=e.getNewTX("send created car msgs");this.txs.add(t)}}t.CreateCompController=i},8982:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CreateUpdateCompControllerProto=void 0,t.CreateUpdateCompControllerProto=class{constructor(e,t,s){this.inputText=e,this.inputColor=t,this.btn=s}}},2477:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateCompController=void 0;const r=s(5094),a=s(4690),n=s(379),o=s(6911),i=s(8982);class c extends i.CreateUpdateCompControllerProto{constructor(e){super(e.inputText,e.inputColor,e.btn),this.rxs=new Set,this.chooseCarListener=async e=>{e.msg instanceof o.DBusMsgCarActionSelectedMsg&&(this.choosedCar=r.OBJ_PROCESSOR.deepClone(e.msg.car),this.notifyCb=e.msg.notifyChanges,this.inputColor.value=e.msg.car.color,this.inputText.value=e.msg.car.name,this.btn.disabled=!1)},this.setupBtnUpdate()}autoConnect(e){const t=e.getNewRX(this.chooseCarListener,"listen car choosing");e.plugRX(a.DBusTopics.CAR_ACTION,t)}setupBtnUpdate(){this.btn.disabled=!0,this.btn.addEventListener("click",(()=>{this.btn.disabled=!0,this.choosedCar&&(this.choosedCar.color=this.inputColor.value,this.choosedCar.name=this.inputText.value,n.REST_CLIENT_GARAGE.updateCar(this.choosedCar).then((e=>{this.notifyCb&&this.notifyCb(e)})).finally((()=>{this.btn.disabled=!1})))}))}}t.UpdateCompController=c},3525:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateUpdateComponent=void 0;const a=s(1168),n=s(5856),o=s(4312),i=s(2477),c=r(s(2022)),l=r(s(6725));class d extends a.BaseComp{constructor(e,t){super("div"),this.hubName=n.DBUS_HUB_NAMES.CREATE_UPDATE,this.textInput=document.createElement("input"),this.colorInput=document.createElement("input"),this.btn=document.createElement("button"),this._rootElement.classList.add(c.default.root),this.textInput.type="text",this.textInput.classList.add(c.default["text-input"]),this.colorInput.type="color",this.colorInput.classList.add(c.default["color-input"]),this.btn.textContent=t,this.btn.classList.add(l.default.btn),this._rootElement.append(this.textInput,this.colorInput,this.btn);const s={inputText:this.textInput,inputColor:this.colorInput,btn:this.btn};switch(e){case"UPDATE":this.controller=new i.UpdateCompController(s);break;case"CREATE":default:this.controller=new o.CreateCompController(s)}}connect(e){this.controller.autoConnect(e)}}t.CreateUpdateComponent=d},44:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MainControlsComp=void 0;const a=s(1168),n=s(3525),o=s(5856),i=s(9362),c=s(745),l=s(3102),d=r(s(7715)),h=r(s(6725)),u=s(379),_=s(9653),E=s(4590),g=s(928);class m extends a.BaseComp{constructor(){super("div"),this.hubName=o.DBUS_HUB_NAMES.MAIN_CONTROLS,this.createComponent=new n.CreateUpdateComponent("CREATE","create"),this.updateComponent=new n.CreateUpdateComponent("UPDATE","update"),this.btnRace=document.createElement("button"),this.btnReset=document.createElement("button"),this.btnGenerate=document.createElement("button"),this.genRandomCarName=()=>{const e=E.getRandomInt(_.CAR_MODEL_LIST_KEYS.length-1),t=_.CAR_MODEL_LIST_KEYS[e],s=_.CAR_MODEL_LIST[t];return`${t} ${s[E.getRandomInt(s.length-1)]}`},this._rootElement.classList.add(d.default["main-controls"]);const e=this.renderBtns();this._rootElement.append(this.createComponent.rootElement,this.updateComponent.rootElement,e),this.btnGenerate.addEventListener("click",(async()=>{this.btnGenerate.disabled=!0,await this.generate(100),this.btnGenerate.disabled=!1}))}renderBtns(){const e=document.createElement("span");e.textContent="race",this.btnRace.append(e),this.btnRace.classList.add(h.default.btn,h.default["btn-15"]),this.btnReset.textContent="reset",this.btnReset.classList.add(h.default.btn),this.btnGenerate.textContent="generate cards",this.btnGenerate.classList.add(h.default.btn);const t=document.createElement("div");return t.classList.add(d.default["btn-block"]),t.append(this.btnRace,this.btnReset,this.btnGenerate),t}async generate(e){let t=e;const s={name:this.genRandomCarName(),color:"#234131"},r={id:(await u.REST_CLIENT_GARAGE.createCar(s)).id,wins:E.getRandomArbitraryInt(1,3),time:Number.parseFloat((E.getRandomArbitraryInt(40,50)/3).toFixed(2))};return await g.REST_CLIENT_WINNERS.createWinner(r),t--,!(t>0)||this.generate(t)}connect(e){e.attachSubHub(this.createComponent,"cu_create"),e.attachSubHub(this.updateComponent,"cu_delete");const t=e.getNewTX("start race");this.btnRace.addEventListener("click",(async()=>{const e=new i.DBusMsgRaceRequestMsg,s=await t.transmit({msg:e,prepMode:c.DBusTXPrepModes.freeze,waitMode:c.DBusTXWaitModes.allSetled});console.log(s)})),this.btnReset.addEventListener("click",(async()=>{const e=new l.DBusMsgGarageResetReqMsg,s=await t.transmit({msg:e,prepMode:c.DBusTXPrepModes.freeze,waitMode:c.DBusTXWaitModes.allSetled});console.log(s)}))}}t.MainControlsComp=m},1598:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TrackComp=void 0;const a=s(1168),n=r(s(2096));class o extends a.BaseComp{constructor(){super("div"),this.topBlock=document.createElement("div"),this._rootElement.classList.add(n.default.track),this._rootElement.append(),this.topBlock.classList.add(n.default["track__controls-block"]),this.rootElement.style.setProperty("--width-factor",""+window.innerWidth/1920),window.addEventListener("resize",(()=>{this.rootElement.style.setProperty("--width-factor",""+window.innerWidth/1920)}))}placeCar(e){this._rootElement.hasChildNodes()&&this._rootElement.childNodes.forEach((e=>e.remove())),this.topBlock.append(e.spanCarName),this._rootElement.append(this.topBlock,e.rootElement)}getTrackLength(){const e=window.getComputedStyle(this._rootElement).gridTemplateColumns.split(" ")[o.CAR_GRID_COLUMN_NUMBER];if(!e)throw new Error("STYLES ARE BROKEN");return console.log(e),Number.parseFloat(e)}}t.TrackComp=o,o.CAR_GRID_COLUMN_NUMBER=0},4977:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderComponent=void 0;const a=s(1168),n=s(2994),o=s(5856),i=s(4690),c=s(7950),l=r(s(3544)),d=s(9546);class h extends a.BaseComp{constructor(e=o.DBUS_HUB_NAMES.HEADER){super("header"),this.hubName=e,this.buses=[],this.illuminateNavItem=async e=>{const{msg:t}=e;return t instanceof c.DBusMsgRouteIsChangedMsg&&this.anchors.forEach((e=>{e.getAttribute("href")===t.newRoute?e.classList.add(l.default["header-nav__anchor_active"]):e.classList.remove(l.default["header-nav__anchor_active"])})),n.DBUS_COMMON_RESPONSES.VOID},this.rootElement.classList.add(l.default.header),this.logo=document.createElement("h1"),this.logo.classList.add(l.default.header__logo);const t=document.createElement("span");t.textContent="async";const s=document.createElement("span");s.textContent="race",this.logo.append(t,s),this.rootElement.append(this.logo),this.navContainer=document.createElement("nav"),this.navContainer.classList.add(l.default["header-nav"]),this.rootElement.append(this.navContainer);const r=document.createElement("ul");r.classList.add(l.default["header-nav__list"]),this.navContainer.append(r);const a={li:l.default["header-nav__item"],a:l.default["header-nav__anchor"],svg:l.default["header-nav__svg"],span:l.default["header-nav__span"]},i=[new d.NavItem("garage","#garage",a),new d.NavItem("winners","#winners",a)];this.anchors=i.map((e=>e.anchor)),r.append(...i.map((e=>e.rootElement)))}connect(e){const t=e.getNewRX(this.illuminateNavItem,"illuminate nav items");e.plugRX(i.DBusTopics.ROUTING,t)}}t.HeaderComponent=h},9546:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavItem=void 0;const r=s(1168);class a extends r.BaseComp{constructor(e,t,s,r){super("li"),s?.li&&this._rootElement.classList.add(s.li),this._anchor=document.createElement("a"),this._anchor.setAttribute("href",t),s?.a&&this._anchor.classList.add(s.a),r&&(this.iconImage=document.createElement("img"),this.iconImage.src=r,s?.svg&&this.iconImage.classList.add(s.svg),this._anchor.append(this.iconImage)),this.span=document.createElement("span"),this.span.textContent=e,s?.span&&this.span.classList.add(s.span),this._anchor.append(this.span),this.rootElement.append(this._anchor)}get anchor(){return this._anchor}}t.NavItem=a},8655:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnerRowComp=void 0;const r=s(1168);class a extends r.BaseComp{constructor(e,t){super("tr"),this.idElem=document.createElement("td"),this.carElem=document.createElement("td"),this.nameElem=document.createElement("td"),this.winsElem=document.createElement("td"),this.bestTimeElem=document.createElement("td"),this.idElem.textContent=e.id.toString(),this.nameElem.textContent=t.name,this.winsElem.textContent=e.wins.toString(),this.bestTimeElem.textContent=e.time.toString(),this._rootElement.append(this.idElem,this.carElem,this.nameElem,this.winsElem,this.bestTimeElem)}}t.WinnerRowComp=a},3287:function(e,t,s){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersComp=void 0;const a=s(1168),n=s(379),o=s(928),i=s(5474),c=s(8655),l=s(7612),d=r(s(9052)),h=r(s(6725));class u extends a.BaseComp{constructor(){super("section"),this.table=document.createElement("table"),this.tableBody=document.createElement("tbody"),this.tableHead=document.createElement("thead"),this.thId=document.createElement("th"),this.thCar=document.createElement("th"),this.thName=document.createElement("th"),this.thWins=document.createElement("th"),this.thBestTime=document.createElement("th"),this.currOrder="DESC",this.currSort="wins",this.entriesPerPage=10,this.pagerCallback=async e=>{try{return await this.refillTable(void 0,void 0,e),!0}catch{return!1}},this.tableHeadClickListener=async e=>{let t;switch(e.target){case this.thId:t=i.REST_CLIENT_WINNERS_SORT_OPTIONS.id;break;case this.thWins:t=i.REST_CLIENT_WINNERS_SORT_OPTIONS.wins;break;case this.thBestTime:t=i.REST_CLIENT_WINNERS_SORT_OPTIONS.time}if(t){const s=e.target;this.currOrder=s.classList.contains(d.default["table__sorted-elem_desc"])?"ASC":"DESC",this.currSort=t,await this.refillTable(),this.refreshTableHeader(s)}},this.refreshTableHeader=e=>{this.currSortedElem&&this.currSortedElem.classList.remove(d.default["table__sorted-elem"]),e.classList.add(d.default["table__sorted-elem"]),this.currSortedElem=e,"ASC"===this.currOrder?(e.classList.remove(d.default["table__sorted-elem_desc"]),e.classList.add(d.default["table__sorted-elem_asc"])):(e.classList.remove(d.default["table__sorted-elem_asc"]),e.classList.add(d.default["table__sorted-elem_desc"]))},this._rootElement.classList.add(d.default.winners),this._rootElement.style.setProperty("background-image","url('./assets/imgs/backgrounds/winners/anime-girl-cyberpunk-ride-4k-lx-2880x1800.jpg')");const e=document.createElement("div");e.classList.add(d.default.pager),this.pager=new l.Pager(this.entriesPerPage,this.pagerCallback);const t=this.pager.getBtnPrevPage(),s=this.pager.getBtnNextPage();t.classList.add(h.default.btn,h.default["btn-6"],d.default["pager-btn"]),s.classList.add(h.default.btn),s.classList.add(h.default.btn,h.default["btn-6"],d.default["pager-btn"]),e.append(t,s);const r=this.pager.getPagerSpan();r.classList.add(d.default["pager-span"]),this.table.append(this.tableHead,this.tableBody,e,r),this.table.classList.add(d.default.table),this._rootElement.append(this.table),this.renderHeader(),this.refillTable().then((()=>this.refreshTableHeader(this.thBestTime)))}renderHeader(){const e=document.createElement("tr");this.thId.textContent="ID",this.thId.classList.add(d.default["table__can-be-sorted"]),this.thCar.textContent="CAR",this.thName.textContent="NAME",this.thWins.textContent="WINS",this.thWins.classList.add(d.default["table__can-be-sorted"]),this.thBestTime.textContent="BEST TIME",this.thBestTime.classList.add(d.default["table__can-be-sorted"]),e.append(this.thId,this.thCar,this.thName,this.thWins,this.thBestTime),this.tableHead.append(e),this.tableHead.addEventListener("click",this.tableHeadClickListener)}async refillTable(e,t,s){return new Promise(((r,a)=>{for(;this.tableBody.firstChild;)this.tableBody.firstChild.remove();const i=s?"next"===s?this.pager.getCurrPageNumber()+1:this.pager.getCurrPageNumber()-1:1,l=t||this.currOrder,d=e||this.currSort;o.REST_CLIENT_WINNERS.getWinners(i,10,d,l).then((e=>{this.pager.setEntriesCount(Number.parseInt(e.limit,10)),0===e.cars.length&&a(),e.cars.forEach((e=>{n.REST_CLIENT_GARAGE.getCar(e.id).then((t=>{const s=new c.WinnerRowComp(e,t);this.tableBody.append(s.rootElement),r(!0)}))}))}))}))}}t.WinnersComp=u,u.TEXT_CONTENT_ENG={}},9653:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CAR_MODEL_LIST_KEYS=t.CAR_MODEL_LIST=void 0;const r=s(5094),a=r.OBJ_PROCESSOR.deepFreeze({Lamborghini:["Murciélago","350 GT","400 GT","Sián FKP 37","Essenza SCV12","Urus","Centenario","Huracán","Veneno","Sesto Elementо","Aventador","Reventón","Gallardo","Diablo","LM002","Jalpa","Silhouette","Countach","Urraco","Jarama","Islero","Espada","Miura"],"Aston Martin":["Project 003","Valkyrie","DBS","Vanquish Zagato","Vanquish","Virage/Virage Volante","V12 Zagato","One-77","V8 Coupe/V8 Volante","V8 Zagato"],Ferrari:["Roma","Portfolio","488 GTB","California T","360 Spider","355 F1 Berlinetta","F355 GTS","456 GT","Testarossa","SF1000"],Koenigsegg:["Jesko Absolut","Jesko","Agera Final","Agera XS","Agera X","Agera S","Regera","Agera RS","One:1","CCGT"]});t.CAR_MODEL_LIST=a;const n=r.OBJ_PROCESSOR.deepFreeze(Object.keys(a));t.CAR_MODEL_LIST_KEYS=n},1168:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComp=void 0,t.BaseComp=class{constructor(e="div"){this._rootElement=document.createElement(e)}get rootElement(){return this._rootElement}}},4590:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomArbitraryInt=t.getRandomInt=t.genUniqId=void 0,t.genUniqId=function(){const e=new Uint8Array(4);return window.crypto.getRandomValues(e).join("")},t.getRandomInt=function(e){return Math.floor(Math.random()*e)},t.getRandomArbitraryInt=function(e,t){return Math.floor(Math.random()*(t-e)+e)}},3662:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.transitionPromise=void 0,t.transitionPromise=function(e){return new Promise((t=>{const s=s=>{e.val&&e.elem.style.setProperty(e.prop,e.val),setTimeout((()=>{t(!0)}),s||20)};if(e.forceAutoresolveIn)s(e.forceAutoresolveIn);else if(e.valToWait&&window.getComputedStyle(e.elem).getPropertyValue(e.prop)===e.valToWait)s();else{const r=window.getComputedStyle(e.elem).getPropertyValue("transition-property").replace(",","").split(" ");let a=r.lastIndexOf(e.prop);-1===a&&(a=r.lastIndexOf("all")),-1!==a?"0s"===window.getComputedStyle(e.elem).getPropertyValue("transition-duration").replace(",","").split(" ")[a]?s():(()=>{const s=r=>{r.target===e.elem&&r.propertyName===e.prop&&(e.valToWait&&window.getComputedStyle(e.elem).getPropertyValue(e.prop)!==e.valToWait||(e.elem.removeEventListener("transitionend",s),e.elem.removeEventListener("transitionend",s),t(!0)))};e.elem.addEventListener("transitionend",s),e.elem.addEventListener("transitioncancel",s),e.val&&e.elem.style.setProperty(e.prop,e.val)})():s()}}))}},5094:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OBJ_PROCESSOR=void 0;const s=new class{constructor(){this.deepFreeze=e=>{if("object"==typeof e&&null!==e){const t=e;return Object.keys(t).forEach((e=>{"object"!=typeof t[e]||Object.isFrozen(t[e])||this.deepFreeze(t[e])})),Object.freeze(e)}throw new Error("not object")},this.deepClone=e=>{if(Array.isArray(e)){const t=[];return e.forEach((e=>{t.push(e)})),t.map((e=>this.deepClone(e)))}if("object"==typeof e&&null!==e){if(e instanceof HTMLElement)return e.cloneNode(!0);if(e instanceof Blob)return e.slice();const t={...e};return Object.keys(t).forEach((e=>{t[e]=this.deepClone(t[e])})),Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}return e}}};t.OBJ_PROCESSOR=s,s.deepFreeze(s)},7172:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBus=void 0;const r=s(4590),a=s(5094),n=s(7247),o=s(492),i=s(8927),c=s(2606),l=s(745),d=s(4441),h=s(7656),u=s(5856);t.DBus=class{constructor(){return this.network=new Map,this.idCounter={txs:0,rxs:0},this.createdRXs=new Set,this.createdTXs=new Set,this.attachedHubs=new Map,this.occupiedNames=new Set,this.callRXFunc=(e,t)=>{switch(e.headers.prepMode){case l.DBusTXPrepModes.clone:return(()=>{const s=a.OBJ_PROCESSOR.deepClone(e);return t.func(s)})();case l.DBusTXPrepModes.freeze:return(()=>{const s=a.OBJ_PROCESSOR.deepFreeze(e);return t.func(s)})();default:throw new Error(n.DBUS_ERRORS.UNEXPECTED_PREP_MODE)}},this.busId=r.genUniqId(),Object.freeze(this)}attachHub(e,t){return this.createInterfaceForHub(e,void 0,t)}createInterfaceForHub(e,t,s){if(this.attachedHubs.has(e))throw new Error(n.DBUS_ERRORS.HUB_IS_ALREADY_ATTACHED);if(!(e.hubName in u.DBUS_HUB_NAMES))throw new Error(n.DBUS_ERRORS.HUB_NAME_NOT_AUTHORIZED);let r=t?`${t}_${e.hubName}`:e.hubName;if(s&&(r+=`_${s}`),this.occupiedNames.has(r))throw new Error(n.DBUS_ERRORS.HUB_NAME_IS_OCCUPIED);const o=new h.DBusInterface((e=>this.getNewTX(r,e)),((e,t)=>this.genNewRX(e,t)),((e,t)=>this.plugRX(e,t)),((e,t)=>this.unplugRX(e,t)),((e,t)=>this.createInterfaceForHub(e,r,t)));return this.occupiedNames.add(r),this.attachedHubs.set(e,o),a.OBJ_PROCESSOR.deepFreeze(o),e.connect(o)}getNewTX(e,t){const s=r.genUniqId(),n=this.idCounter.txs++,o=new i.DBusTX(n,s,this.busId,(async r=>{const a=new d.DBusTXDataHeaders(e,s,n,r.waitMode,r.prepMode,t),o=new c.DBusTXData(a,r.msg);return await this.transmit(o)})),l=a.OBJ_PROCESSOR.deepFreeze(o);return this.createdTXs.add(l),l}genNewRX(e,t){const s=r.genUniqId(),n=this.idCounter.rxs++,i=new o.DBusRX(n,s,this.busId,e,t),c=a.OBJ_PROCESSOR.deepFreeze(i);return this.createdRXs.add(c),c}plugRX(e,t){if(!this.createdRXs.has(t))throw new Error(n.DBUS_ERRORS.XENO_RX);this.network.has(e)||this.network.set(e,new Set),this.network.get(e)?.add(t)}unplugRX(e,t){this.network.get(e)?.delete(t)}async transmit(e){if(!this.network.has(e.msg.topic))throw new Error(n.DBUS_ERRORS.TOPIC_IS_NOT_EXIST);const t=this.network.get(e.msg.topic);if(void 0===t||0===t.size)throw new Error(n.DBUS_ERRORS.TOPIC_HAS_NO_RXS);let s,r=[];if(e.msg.prefResponseRxIds){if(t.forEach((t=>{e.msg.prefResponseRxIds?.includes(t.id)&&r.push(t)})),0===r.length)throw new Error(n.DBUS_ERRORS.PREF_RXS_ARE_NOT_EXIST)}else r=[...t];switch(e.headers.waitMode){case l.DBusTXWaitModes.all:s=await Promise.all(r.map((t=>this.callRXFunc(e,t))));break;case l.DBusTXWaitModes.allSetled:s=await Promise.allSettled(r.map((t=>this.callRXFunc(e,t))));break;case l.DBusTXWaitModes.manual:s=r;break;case l.DBusTXWaitModes.nowait:default:r.map((t=>this.callRXFunc(e,t))),s=!0}return s}}},2994:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBUS_COMMON_RESPONSES=void 0;const r=s(5094).OBJ_PROCESSOR.deepFreeze({VOID:"VOID",BAD_REQUEST:"BAD_REQUEST"});t.DBUS_COMMON_RESPONSES=r},7247:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBUS_ERRORS=void 0;const r=s(5094).OBJ_PROCESSOR.deepFreeze({HUB_NAME_IS_OCCUPIED:"HUB_NAME_IS_OCCUPIED",HUB_IS_ALREADY_ATTACHED:"HUB_IS_ALREADY_ATTACHED",HUB_NAME_NOT_AUTHORIZED:"HUB_NAME_NOT_AUTHORIZED",XENO_RX:"XENO_RX",TOPIC_IS_NOT_EXIST:"TOPIC_IS_NOT_EXIST",TOPIC_HAS_NO_RXS:"TOPIC_HAS_NO_RXS",PREF_RXS_ARE_NOT_EXIST:"PREF_RXS_ARE_NOT_EXIST",UNEXPECTED_PREP_MODE:"UNEXPECTED_PREP_MODE"});t.DBUS_ERRORS=r},5856:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBUS_HUB_NAMES=void 0;const r=s(5094),a=new class{constructor(){this.APP="APP",this.ROUTER="ROUTER",this.GARAGE="GARAGE",this.HEADER="HEADER",this.MAIN_CONTROLS="MAIN_CONTROLS",this.CREATE_UPDATE="CREATE_UPDATE",this.GARAGE_CONTROLLER="GARAGE_CONTROLLER"}},n=r.OBJ_PROCESSOR.deepFreeze(a);t.DBUS_HUB_NAMES=n},7656:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusInterface=t.isDBusHub=void 0;const r=s(5856);t.isDBusHub=function(e){const t=e;return"connect"in t&&"hubName"in t&&"string"==typeof t.hubName&&t.hubName in r.DBUS_HUB_NAMES},t.DBusInterface=class{constructor(e,t,s,r,a){this.arrowedGetNewTX=e,this.arrowedGetNewRX=t,this.arrowedPlugRX=s,this.arrowedUnplugRX=r,this.attachSubHub=a,this.RXs=new Set,this.TXs=new Set,this.RXsPlugMap=new Map}getNewRX(e,t){const s=this.arrowedGetNewRX(e,t);return this.RXs.add(s),s}getNewTX(e){const t=this.arrowedGetNewTX(e);return this.TXs.add(t),t}plugRX(e,t){this.RXsPlugMap.has(e)||this.RXsPlugMap.set(e,new Set),this.RXsPlugMap.get(e)?.add(t),this.arrowedPlugRX(e,t)}unplugRX(e,t){this.RXsPlugMap.get(e)?.delete(t),this.arrowedUnplugRX(e,t)}}},492:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusRX=void 0,t.DBusRX=class{constructor(e,t,s,r,a){this.regNumber=e,this.id=t,this.busId=s,this.func=r,this.desc=a}}},4690:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.DBusTopics=void 0,(s=t.DBusTopics||(t.DBusTopics={}))[s.ROUTING=0]="ROUTING",s[s.CAR_ACTION=1]="CAR_ACTION",s[s.GARAGE=2]="GARAGE",s[s.REST_CLIENT_REQUESTS=3]="REST_CLIENT_REQUESTS"},4441:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusTXDataHeaders=void 0,t.DBusTXDataHeaders=class{constructor(e,t,s,r,a,n){this.hubName=e,this.txId=t,this.txRegNumber=s,this.waitMode=r,this.prepMode=a,this.txDesc=n}}},2606:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusTXData=void 0,t.DBusTXData=class{constructor(e,t){this.headers=e,this.msg=t}}},745:(e,t)=>{var s,r;Object.defineProperty(t,"__esModule",{value:!0}),t.DBusTXPrepModes=t.DBusTXWaitModes=void 0,(r=t.DBusTXWaitModes||(t.DBusTXWaitModes={}))[r.nowait=0]="nowait",r[r.all=1]="all",r[r.allSetled=2]="allSetled",r[r.manual=3]="manual",(s=t.DBusTXPrepModes||(t.DBusTXPrepModes={}))[s.clone=0]="clone",s[s.freeze=1]="freeze"},8927:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusTX=void 0,t.DBusTX=class{constructor(e,t,s,r){this.regNumber=e,this.id=t,this.busId=s,this.transmit=r}}},7469:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsg=void 0,t.DBusMsg=class{constructor(e,t,s){this.topic=e,this.rxIds=t,this.prefResponseRxIds=s}}},7612:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Pager=void 0,t.Pager=class{constructor(e,t){this.entriesPerPage=e,this.listCallback=t,this.firstPageNumber=1,this.currPageNumber=this.firstPageNumber,this.lastPageNumber=0,this.btnNextPage=document.createElement("button"),this.btnPrevPage=document.createElement("button"),this.pagerSpan=document.createElement("span"),this.entriesCount=0,this.callbackIsCalled=!1;const s=document.createElement("span");s.textContent="Next page",this.btnNextPage.append(s);const r=document.createElement("span");r.textContent="Prev page",this.btnPrevPage.append(r),this.btnNextPage.addEventListener("click",(()=>this.callCallback("next"))),this.btnPrevPage.addEventListener("click",(()=>this.callCallback("prev")))}setLastPageNumber(e){this.lastPageNumber=e,this.callbackIsCalled||this.toggleBtnsDisabled(!1)}setEntriesCount(e){this.entriesCount=e,this.lastPageNumber=Math.ceil(this.entriesCount/this.entriesPerPage),this.pagerSpan.textContent=`Entries: ${e}`,this.callbackIsCalled||this.toggleBtnsDisabled(!1)}getCurrPageNumber(){return this.currPageNumber}getBtnPrevPage(){return this.btnPrevPage}getBtnNextPage(){return this.btnNextPage}getPagerSpan(){return this.pagerSpan}async callCallback(e){if(this.callbackIsCalled=!0,this.toggleBtnsDisabled(!0),await this.listCallback(e))switch(e){case"next":this.currPageNumber++;break;case"prev":this.currPageNumber--}this.toggleBtnsDisabled(!1),this.callbackIsCalled=!1}toggleBtnsDisabled(e){if(!0===e)return this.btnPrevPage.disabled=!1,void(this.btnNextPage.disabled=!1);this.currPageNumber>this.firstPageNumber?this.btnPrevPage.disabled=!1:this.btnPrevPage.disabled=!0,this.currPageNumber<this.lastPageNumber?this.btnNextPage.disabled=!1:this.btnNextPage.disabled=!0}}},2623:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsgRoutingMsg=void 0;const r=s(4690),a=s(7469);class n extends a.DBusMsg{constructor(e,t){super(r.DBusTopics.ROUTING,e,t)}}t.DBusMsgRoutingMsg=n},7950:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsgRouteIsChangedMsg=void 0;const r=s(2623);class a extends r.DBusMsgRoutingMsg{constructor(e,t,s){super(t,s),this.newRoute=e}}t.DBusMsgRouteIsChangedMsg=a},1209:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleRouterAgent=void 0,t.SimpleRouterAgent=class{constructor(e,t,s,r,a){this.type=e,this.path=t,this.callback=s,this.getStateCallback=r,this.setStateCallback=a}}},5207:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleRouter=void 0;const r=s(5094),a=s(5856),n=s(745),o=s(7950);t.SimpleRouter=class{constructor(e){switch(this.hubName=a.DBUS_HUB_NAMES.ROUTER,this.agents=new Set,this.txs=new Set,this.restrictions=new Set,e.mode){case"#":break;case"?":throw new Error(`${e.mode} is not supported yet!`);default:throw new Error(`${e.mode} is not supported!`)}this.options=r.OBJ_PROCESSOR.deepFreeze(e),window.addEventListener("popstate",(async()=>{if(window.location.href!==this.currRoute)if(this.restrictions.size>0){const e=window.location.href;this.currRoute?window.location.href=this.currRoute:this.options.defaultRoot&&(window.location.href=`${window.location.host}/${this.options.defaultRoot}`);const t=[...this.restrictions.values()],s=t.map((e=>e())),r=await Promise.all(s);let a=!1;if(Array.isArray(r))for(let e=0;e<r.length;e++){if("boolean"!=typeof r[e])throw new Error("restrict func returned not boolean value!");if(r[e]){const s=t[e];s&&this.restrictions.delete(s)}else a=!0}a||(window.location.href=e)}else this.activateWantedAgents()}))}activateWantedAgents(){this.currRoute=window.location.href;let e=0;const t=[];if(!this.options.onlyDBus&&"#"===this.options.mode){const s=[...this.agents];for(let t=0;t<this.agents.size;t++)if(s[t]?.path===window.location.hash){try{s[t]?.callback()}catch(e){e.push(e)}e++;break}0===e&&(this.defaultAgent&&this.options.defaultRoot===window.location.hash?this.defaultAgent.callback():t.push(new Error("Agent is not finded")))}return this.txs.size>0&&this.txs.forEach((e=>{const t=new o.DBusMsgRouteIsChangedMsg(window.location.hash);e.transmit({msg:t,waitMode:n.DBusTXWaitModes.nowait,prepMode:n.DBusTXPrepModes.freeze})})),t.length>0?t:e>0}addRouterAgent(e){this.agents.add(e)}removeRouterAgent(e){this.agents.delete(e)}flushRouterAgents(){this.agents.clear()}connect(e){const t=e.getNewTX("broadcasting route changes");this.txs.add(t)}}},9461:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.REST_CLIENT_ENGINE=void 0;const r=s(5094),a=s(3231),n=new class{constructor(e){this.baseUrl=e,this.resUrl="/engine",this.fullUrl=e+this.resUrl}toggleEngine(e,t){return new Promise(((s,r)=>{const n=`${this.fullUrl}?id=${e}&status=${t}`;fetch(n,{method:"GET"}).then((e=>{if(200===e.status)return e.json();throw new Error(a.REST_CLIENT_ERROR.UNEXPECTED_RESULT)})).then((e=>s(e))).catch((e=>{e.message in a.REST_CLIENT_ERROR?r(e):r(new Error(a.REST_CLIENT_ERROR.UNKNOWN_ERROR))}))}))}enterDriveMode(e){return new Promise(((t,s)=>{const r=`${this.fullUrl}?id=${e}&status=drive`;fetch(r,{method:"GET"}).then((e=>{switch(e.status){case 200:t(!0);break;case 400:case 404:case 429:case 500:default:s(new Error(`${e.status}`))}}))}))}}("http://127.0.0.1:3000"),o=r.OBJ_PROCESSOR.deepFreeze(n);t.REST_CLIENT_ENGINE=o},9496:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsgRESTReqGarageCreateCarMsg=void 0;const r=s(8381),a=s(3748);class n extends r.DBusMsgRESTReqMsg{constructor(e,t,s){super(a.REST_CLIENT_NAMES.GARAGE,t,s),this.unregCar=e,this.rxIds=t,this.prefResponseRxIds=s}}t.DBusMsgRESTReqGarageCreateCarMsg=n},4282:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsgRESTReqGarageDeleteCarMsg=void 0;const r=s(8381),a=s(3748);class n extends r.DBusMsgRESTReqMsg{constructor(e,t,s){super(a.REST_CLIENT_NAMES.GARAGE,t,s),this.id=e,this.rxIds=t,this.prefResponseRxIds=s}}t.DBusMsgRESTReqGarageDeleteCarMsg=n},379:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.REST_CLIENT_GARAGE=void 0;const r=s(5094),a=s(2994),n=s(4690),o=s(8381),i=s(3231),c=s(3748),l=s(9496),d=s(4282),h=new class{constructor(e){this.baseUrl=e,this.clientName=c.REST_CLIENT_NAMES.GARAGE,this.txs=new Set,this.resUrl="/garage",this.requestRXFunc=async e=>{if(e.msg instanceof o.DBusMsgRESTReqMsg&&e.msg.destClient===this.clientName){if(e.msg instanceof l.DBusMsgRESTReqGarageCreateCarMsg)return this.createCar(e.msg.unregCar);if(e.msg instanceof d.DBusMsgRESTReqGarageDeleteCarMsg)return this.deleteCar(e.msg.id)}return a.DBUS_COMMON_RESPONSES.VOID},this.fullUrl=e+this.resUrl}autoConnect(e){const t=e.getNewRX(this.requestRXFunc,"listen requests to db");e.plugRX(n.DBusTopics.REST_CLIENT_REQUESTS,t)}getCars(e,t){return new Promise(((s,r)=>{const a=t||"",n=`${this.fullUrl}?_page=${e}&_limit=${a}`;let o="";fetch(n,{method:"GET"}).then((e=>{if(200===e.status)return o=e.headers.get("X-Total-Count"),e.json();throw new Error(i.REST_CLIENT_ERROR.UNEXPECTED_RESULT)})).then((e=>s({limit:o,cars:e}))).catch((e=>{e.message in i.REST_CLIENT_ERROR?r(e):r(new Error(i.REST_CLIENT_ERROR.UNKNOWN_ERROR))}))}))}getCar(e){return new Promise(((t,s)=>{const r=`${this.fullUrl}/${e}`;fetch(r,{method:"GET"}).then((e=>{if(200===e.status)return e.json();if(404===e.status)throw new Error(i.REST_CLIENT_ERROR.NOT_FOUND);throw new Error(i.REST_CLIENT_ERROR.UNEXPECTED_RESULT)})).then((e=>t(e))).catch((e=>{e.message in i.REST_CLIENT_ERROR?s(e):s(new Error(i.REST_CLIENT_ERROR.UNKNOWN_ERROR))}))}))}createCar(e){return new Promise(((t,s)=>{fetch(this.fullUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(201===e.status)return e.json();throw new Error(i.REST_CLIENT_ERROR.UNEXPECTED_RESULT)})).then((e=>t(e))).catch((e=>{e.message in i.REST_CLIENT_ERROR?s(e):s(new Error(i.REST_CLIENT_ERROR.UNKNOWN_ERROR))}))}))}deleteCar(e){return new Promise(((t,s)=>{const r=`${this.fullUrl}/${e}`;fetch(r,{method:"DELETE"}).then((e=>{if(200===e.status&&t(!0),404===e.status)throw new Error(i.REST_CLIENT_ERROR.NOT_FOUND);throw new Error(i.REST_CLIENT_ERROR.UNEXPECTED_RESULT)})).catch((e=>{e.message in i.REST_CLIENT_ERROR?s(e):s(new Error(i.REST_CLIENT_ERROR.UNKNOWN_ERROR))}))}))}updateCar(e){return new Promise(((t,s)=>{const r=`${this.fullUrl}/${e.id}`,a=e;fetch(r,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>{if(200===e.status)return e.json();if(404===e.status)throw new Error(i.REST_CLIENT_ERROR.NOT_FOUND);throw new Error(i.REST_CLIENT_ERROR.UNEXPECTED_RESULT)})).then((e=>t(e))).catch((e=>{e.message in i.REST_CLIENT_ERROR?s(e):s(new Error(i.REST_CLIENT_ERROR.UNKNOWN_ERROR))}))}))}}("http://127.0.0.1:3000");h.autoConnect=e=>{};const u=r.OBJ_PROCESSOR.deepFreeze(h);t.REST_CLIENT_GARAGE=u},5474:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.REST_CLIENT_WINNERS_SORT_OPTIONS=void 0;const r=s(5094),a=new class{constructor(){this.id="id",this.wins="wins",this.time="time"}},n=r.OBJ_PROCESSOR.deepFreeze(a);t.REST_CLIENT_WINNERS_SORT_OPTIONS=n},928:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.REST_CLIENT_WINNERS=void 0;const r=s(5094),a=s(3231),n=new class{constructor(e){this.baseUrl=e,this.resUrl="/winners",this.fullUrl=e+this.resUrl}getWinners(e=0,t,s,r){return new Promise(((n,o)=>{const i=t||"";let c=`${this.fullUrl}?_page=${e}&_limit=${i}`;s&&(c+=`&_sort=${s}`),r&&(c+=`&_order=${r}`);let l="";fetch(c,{method:"GET"}).then((e=>{if(200===e.status)return l=e.headers.get("X-Total-Count"),e.json();throw new Error(a.REST_CLIENT_ERROR.UNEXPECTED_RESULT)})).then((e=>n({limit:l,cars:e}))).catch((e=>{e.message in a.REST_CLIENT_ERROR?o(e):o(new Error(a.REST_CLIENT_ERROR.UNKNOWN_ERROR))}))}))}getWinner(e){return new Promise(((t,s)=>{const r=`${this.fullUrl}/${e}`;fetch(r,{method:"GET"}).then((e=>{if(200===e.status)return e.json();if(404===e.status)throw new Error(a.REST_CLIENT_ERROR.NOT_FOUND);throw new Error(a.REST_CLIENT_ERROR.UNEXPECTED_RESULT)})).then((e=>t(e))).catch((e=>{e.message in a.REST_CLIENT_ERROR?s(e):s(new Error(a.REST_CLIENT_ERROR.UNKNOWN_ERROR))}))}))}createWinner(e){return new Promise(((t,s)=>{fetch(this.fullUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(201===e.status)return e.json();throw new Error(a.REST_CLIENT_ERROR.UNEXPECTED_RESULT)})).then((e=>t(e))).catch((e=>{e.message in a.REST_CLIENT_ERROR?s(e):s(new Error(a.REST_CLIENT_ERROR.UNKNOWN_ERROR))}))}))}deleteWinner(e){return new Promise(((t,s)=>{const r=`${this.fullUrl}/${e}`;fetch(r,{method:"DELETE"}).then((e=>{if(200===e.status&&t(!0),404===e.status)throw new Error(a.REST_CLIENT_ERROR.NOT_FOUND);throw new Error(a.REST_CLIENT_ERROR.UNEXPECTED_RESULT)})).catch((e=>{e.message in a.REST_CLIENT_ERROR?s(e):s(new Error(a.REST_CLIENT_ERROR.UNKNOWN_ERROR))}))}))}updateWinner(e){return new Promise(((t,s)=>{const r=`${this.fullUrl}/${e.id}`,n=e;fetch(r,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>{if(200===e.status)return e.json();if(404===e.status)throw new Error(a.REST_CLIENT_ERROR.NOT_FOUND);throw new Error(a.REST_CLIENT_ERROR.UNEXPECTED_RESULT)})).then((e=>t(e))).catch((e=>{e.message in a.REST_CLIENT_ERROR?s(e):s(new Error(a.REST_CLIENT_ERROR.UNKNOWN_ERROR))}))}))}}("http://127.0.0.1:3000"),o=r.OBJ_PROCESSOR.deepFreeze(n);t.REST_CLIENT_WINNERS=o},8381:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DBusMsgRESTReqMsg=void 0;const r=s(4690),a=s(7469);class n extends a.DBusMsg{constructor(e,t,s){super(r.DBusTopics.REST_CLIENT_REQUESTS,t,s),this.destClient=e,this.rxIds=t,this.prefResponseRxIds=s}}t.DBusMsgRESTReqMsg=n},3231:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.REST_CLIENT_ERROR=void 0;const r=s(5094).OBJ_PROCESSOR.deepFreeze({UNEXPECTED_RESULT:"UNEXPECTED_RESULT",UNKNOWN_ERROR:"UNKNOWN_ERROR",NOT_FOUND:"NOT_FOUND"});t.REST_CLIENT_ERROR=r},3748:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.REST_CLIENT_NAMES=void 0;const r=s(5094),a=new class{constructor(){this.GARAGE="GARAGE",this.WINNERS="WINNERS"}};t.REST_CLIENT_NAMES=a,r.OBJ_PROCESSOR.deepFreeze(a)}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,s),n.exports}s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=s(6752);window.addEventListener("load",(()=>{const t=document.createElement("div");document.body.append(t),new e.App(t)}))})()})();
//# sourceMappingURL=main.c05d07d1417e1550d7f5.js.map